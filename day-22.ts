/** because "dashing" implies speed */
type Dasher = "ğŸ’¨";

/** representing dancing or grace */
type Dancer = "ğŸ’ƒ";

/** a deer, prancing */
type Prancer = "ğŸ¦Œ";

/** a star for the dazzling, slightly mischievous Vixen */
type Vixen = "ğŸŒŸ";

/** for the celestial body that shares its name */
type Comet = "â˜„ï¸";

/** symbolizing love, as Cupid is the god of love */
type Cupid = "â¤ï¸";

/** representing thunder, as "Donner" means thunder in German */
type Donner = "ğŸŒ©ï¸";

/** meaning lightning in German, hence the lightning bolt */
type Blitzen = "âš¡";

/** for his famous red nose */
type Rudolph = "ğŸ”´";

type Reindeer =
  | Dasher
  | Dancer
  | Prancer
  | Vixen
  | Comet
  | Cupid
  | Donner
  | Blitzen
  | Rudolph;

type RowsArray = [0, 1, 2, 3, 4, 5, 6, 7, 8];

type ColsArray = [0, 1, 2];

type Flatten<T extends Reindeer[][], Acc extends Reindeer[] = []> = T extends [
  infer Head extends Reindeer[],
  ...infer Tail extends Reindeer[][]
]
  ? Flatten<Tail, [...Acc, ...Head]>
  : Acc;

type UniqueCheck<T extends Reindeer[]> = [
  Exclude<Reindeer, T[number]>
] extends [never]
  ? true
  : false;

type RowsCheck<T extends Reindeer[][][]> = T extends [
  infer Head extends Reindeer[][],
  ...infer Tail extends Reindeer[][][]
]
  ? UniqueCheck<Flatten<Head>> extends true
    ? RowsCheck<Tail>
    : false
  : true;

type ColsCheck<
  T extends Reindeer[][][],
  R extends number[] = RowsArray,
  C extends number[] = ColsArray,
  U extends number[] = [0, 1, 2],
  Acc extends Reindeer[] = []
> = U extends [infer H1 extends number, ...infer T1 extends number[]]
  ? C extends [infer H2 extends number, ...infer T2 extends number[]]
    ? R extends [infer H3 extends number, ...infer T3 extends number[]]
      ? ColsCheck<T, T3, C, U, [...Acc, T[H3][H2][H1]]>
      : UniqueCheck<Acc> extends true
      ? ColsCheck<T, RowsArray, T2, U, []>
      : false
    : ColsCheck<T, RowsArray, ColsArray, T1, []>
  : true;

type RegionsCheck<
  T extends Reindeer[][][],
  R extends number[] = RowsArray,
  C extends number[] = ColsArray,
  U extends number[] = [0, 1, 2],
  Acc extends Reindeer[] = [],
  Counter extends number[] = []
> = C extends [infer H1 extends number, ...infer T1 extends number[]]
  ? R extends [infer H2 extends number, ...infer T2 extends number[]]
    ? U extends [infer H3 extends number, ...infer T3 extends number[]]
      ? RegionsCheck<T, R, C, T3, [...Acc, T[H2][H1][H3]], [...Counter, 1]>
      : Counter["length"] extends 9
      ? UniqueCheck<Acc> extends true
        ? RegionsCheck<T, T2, C, [0, 1, 2], []>
        : false
      : RegionsCheck<T, T2, C, [0, 1, 2], [...Acc], [...Counter]>
    : RegionsCheck<T, RowsArray, T1, [0, 1, 2], [...Acc]>
  : true;

type Validate<T extends Reindeer[][][]> = RowsCheck<T> extends true
  ? ColsCheck<T> extends true
    ? RegionsCheck<T> extends true
      ? true
      : false
    : false
  : false;

import { Equal, Expect } from "type-testing";

type test_sudoku_1_actual = Validate<
  [
    //   ^?
    [["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"], ["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "ğŸ”´"]],
    [["ğŸŒŸ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"], ["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"]],
    [["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"]],
    [["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"], ["âš¡", "â˜„ï¸", "â¤ï¸"], ["ğŸ”´", "ğŸŒ©ï¸", "ğŸŒŸ"]],
    [["ğŸŒ©ï¸", "ğŸ”´", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"], ["âš¡", "â˜„ï¸", "â¤ï¸"]],
    [["âš¡", "â˜„ï¸", "â¤ï¸"], ["ğŸŒ©ï¸", "ğŸ”´", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"]],
    [["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"], ["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"], ["ğŸŒ©ï¸", "ğŸ”´", "âš¡"]],
    [["ğŸ”´", "ğŸŒ©ï¸", "âš¡"], ["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"], ["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"]],
    [["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"], ["ğŸ”´", "ğŸŒ©ï¸", "âš¡"], ["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"]]
  ]
>;
type test_sudoku_1 = Expect<Equal<test_sudoku_1_actual, true>>;

type test_sudoku_2_actual = Validate<
  [
    //   ^?
    [["ğŸŒ©ï¸", "ğŸ’¨", "â˜„ï¸"], ["ğŸŒŸ", "ğŸ¦Œ", "âš¡"], ["â¤ï¸", "ğŸ”´", "ğŸ’ƒ"]],
    [["ğŸŒŸ", "âš¡", "â¤ï¸"], ["ğŸ”´", "ğŸ’ƒ", "â˜„ï¸"], ["ğŸŒ©ï¸", "ğŸ’¨", "ğŸ¦Œ"]],
    [["ğŸ”´", "ğŸ¦Œ", "ğŸ’ƒ"], ["ğŸ’¨", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "â˜„ï¸"]],
    [["â¤ï¸", "â˜„ï¸", "ğŸŒ©ï¸"], ["ğŸ’ƒ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ¦Œ", "ğŸŒŸ"]],
    [["ğŸ¦Œ", "ğŸ’ƒ", "âš¡"], ["ğŸŒ©ï¸", "ğŸŒŸ", "ğŸ’¨"], ["ğŸ”´", "â˜„ï¸", "â¤ï¸"]],
    [["ğŸ’¨", "ğŸŒŸ", "ğŸ”´"], ["ğŸ¦Œ", "â˜„ï¸", "â¤ï¸"], ["âš¡", "ğŸ’ƒ", "ğŸŒ©ï¸"]],
    [["â˜„ï¸", "ğŸ”´", "ğŸ’¨"], ["â¤ï¸", "ğŸŒ©ï¸", "ğŸ¦Œ"], ["ğŸ’ƒ", "ğŸŒŸ", "âš¡"]],
    [["ğŸ’ƒ", "â¤ï¸", "ğŸ¦Œ"], ["âš¡", "ğŸ”´", "ğŸŒŸ"], ["â˜„ï¸", "ğŸŒ©ï¸", "ğŸ’¨"]],
    [["âš¡", "ğŸŒ©ï¸", "ğŸŒŸ"], ["â˜„ï¸", "ğŸ’¨", "ğŸ’ƒ"], ["ğŸ¦Œ", "â¤ï¸", "ğŸ”´"]]
  ]
>;
type test_sudoku_2 = Expect<Equal<test_sudoku_2_actual, true>>;

type test_sudoku_3_actual = Validate<
  [
    //   ^?
    [["ğŸ¦Œ", "ğŸ”´", "ğŸ’ƒ"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["âš¡", "â¤ï¸", "ğŸŒŸ"]],
    [["ğŸŒŸ", "âš¡", "ğŸ’¨"], ["â¤ï¸", "ğŸ’ƒ", "ğŸ”´"], ["â˜„ï¸", "ğŸŒ©ï¸", "ğŸ¦Œ"]],
    [["â˜„ï¸", "ğŸŒ©ï¸", "â¤ï¸"], ["âš¡", "ğŸŒŸ", "ğŸ¦Œ"], ["ğŸ’ƒ", "ğŸ”´", "ğŸ’¨"]],
    [["ğŸŒ©ï¸", "ğŸ’ƒ", "ğŸ”´"], ["ğŸ¦Œ", "ğŸ’¨", "âš¡"], ["ğŸŒŸ", "â˜„ï¸", "â¤ï¸"]],
    [["â¤ï¸", "â˜„ï¸", "âš¡"], ["ğŸ’ƒ", "ğŸŒ©ï¸", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ”´"]],
    [["ğŸ’¨", "ğŸŒŸ", "ğŸ¦Œ"], ["â˜„ï¸", "ğŸ”´", "â¤ï¸"], ["ğŸŒ©ï¸", "ğŸ’ƒ", "âš¡"]],
    [["ğŸ’ƒ", "ğŸ’¨", "ğŸŒŸ"], ["ğŸ”´", "ğŸ¦Œ", "â˜„ï¸"], ["â¤ï¸", "âš¡", "ğŸŒ©ï¸"]],
    [["ğŸ”´", "â¤ï¸", "â˜„ï¸"], ["ğŸŒŸ", "âš¡", "ğŸŒ©ï¸"], ["ğŸ’¨", "ğŸ¦Œ", "ğŸ’ƒ"]],
    [["âš¡", "ğŸ¦Œ", "ğŸŒ©ï¸"], ["ğŸ’¨", "â¤ï¸", "ğŸ’ƒ"], ["ğŸ”´", "ğŸŒŸ", "â˜„ï¸"]]
  ]
>;
type test_sudoku_3 = Expect<Equal<test_sudoku_3_actual, true>>;

type test_sudoku_4_actual = Validate<
  [
    //   ^?
    [["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"], ["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "ğŸ”´"]],
    [["ğŸŒŸ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"], ["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"]],
    [["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"]],
    [["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"], ["âš¡", "â˜„ï¸", "â¤ï¸"], ["ğŸ”´", "ğŸŒ©ï¸", "ğŸŒŸ"]],
    [["ğŸŒ©ï¸", "ğŸ”´", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"], ["âš¡", "â˜„ï¸", "â¤ï¸"]],
    [["âš¡", "â˜„ï¸", "â¤ï¸"], ["ğŸŒ©ï¸", "ğŸ”´", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"]],
    [["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"], ["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"], ["âš¡", "ğŸ”´", "ğŸŒŸ"]],
    [["ğŸ”´", "ğŸŒ©ï¸", "âš¡"], ["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"], ["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"]],
    [["â¤ï¸", "ğŸŒŸ", "â˜„ï¸"], ["ğŸ”´", "ğŸŒ©ï¸", "âš¡"], ["ğŸ’ƒ", "ğŸ¦Œ", "ğŸ’¨"]]
  ]
>;
type test_sudoku_4 = Expect<Equal<test_sudoku_4_actual, false>>;

type test_sudoku_5_actual = Validate<
  [
    //   ^?
    [["ğŸŒ©ï¸", "ğŸ’¨", "â˜„ï¸"], ["ğŸŒŸ", "ğŸ¦Œ", "âš¡"], ["â¤ï¸", "ğŸ”´", "ğŸ’ƒ"]],
    [["ğŸŒŸ", "âš¡", "â¤ï¸"], ["ğŸ”´", "ğŸ’ƒ", "â˜„ï¸"], ["ğŸŒ©ï¸", "ğŸ’¨", "ğŸ¦Œ"]],
    [["ğŸ”´", "ğŸ¦Œ", "ğŸ’ƒ"], ["ğŸ’¨", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "â˜„ï¸"]],
    [["â¤ï¸", "â˜„ï¸", "ğŸŒ©ï¸"], ["ğŸ’ƒ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ¦Œ", "ğŸŒŸ"]],
    [["ğŸ¦Œ", "ğŸ’ƒ", "âš¡"], ["ğŸŒ©ï¸", "ğŸŒŸ", "ğŸ’¨"], ["ğŸ”´", "â˜„ï¸", "â¤ï¸"]],
    [["ğŸ’¨", "ğŸŒŸ", "ğŸ”´"], ["ğŸ¦Œ", "â˜„ï¸", "â¤ï¸"], ["âš¡", "ğŸ’ƒ", "ğŸŒ©ï¸"]],
    [["â˜„ï¸", "ğŸ”´", "ğŸ’¨"], ["â¤ï¸", "ğŸ’ƒ", "ğŸ¦Œ"], ["ğŸ’ƒ", "ğŸŒŸ", "âš¡"]],
    [["ğŸ’ƒ", "â¤ï¸", "ğŸ¦Œ"], ["âš¡", "ğŸ”´", "ğŸŒŸ"], ["â˜„ï¸", "ğŸŒ©ï¸", "ğŸ’¨"]],
    [["âš¡", "ğŸŒ©ï¸", "ğŸŒŸ"], ["â˜„ï¸", "ğŸ’¨", "ğŸ’ƒ"], ["ğŸ¦Œ", "â¤ï¸", "ğŸ”´"]]
  ]
>;
type test_sudoku_5 = Expect<Equal<test_sudoku_5_actual, false>>;

type test_sudoku_6_actual = Validate<
  [
    //   ^?
    [["âš¡", "ğŸ”´", "ğŸŒ©ï¸"], ["ğŸ¦Œ", "â¤ï¸", "ğŸ’¨"], ["ğŸ’¨", "ğŸŒŸ", "â˜„ï¸"]],
    [["â¤ï¸", "ğŸ¦Œ", "ğŸŒŸ"], ["ğŸ’¨", "ğŸŒŸ", "ğŸ”´"], ["ğŸ’ƒ", "âš¡", "ğŸŒ©ï¸"]],
    [["ğŸ’¨", "ğŸ’ƒ", "ğŸŒŸ"], ["â˜„ï¸", "âš¡", "ğŸŒ©ï¸"], ["ğŸ”´", "â¤ï¸", "ğŸ¦Œ"]],
    [["ğŸ¦Œ", "âš¡", "ğŸ”´"], ["â¤ï¸", "ğŸ’ƒ", "ğŸ’¨"], ["â˜„ï¸", "ğŸŒ©ï¸", "ğŸŒŸ"]],
    [["ğŸŒŸ", "ğŸŒ©ï¸", "ğŸ’ƒ"], ["âš¡", "ğŸ”´", "â˜„ï¸"], ["â¤ï¸", "ğŸ¦Œ", "ğŸ’¨"]],
    [["â˜„ï¸", "ğŸ’¨", "â¤ï¸"], ["ğŸŒŸ", "ğŸŒ©ï¸", "ğŸ¦Œ"], ["âš¡", "ğŸ’ƒ", "ğŸ”´"]],
    [["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["ğŸ’ƒ", "ğŸ¦Œ", "âš¡"], ["ğŸŒŸ", "ğŸ”´", "â¤ï¸"]],
    [["ğŸ”´", "â¤ï¸", "âš¡"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸŒŸ"], ["ğŸ¦Œ", "ğŸ’¨", "ğŸ’ƒ"]],
    [["ğŸ’ƒ", "ğŸŒŸ", "ğŸ¦Œ"], ["ğŸ”´", "ğŸ’¨", "â¤ï¸"], ["ğŸŒ©ï¸", "â˜„ï¸", "âš¡"]]
  ]
>;
type test_sudoku_6 = Expect<Equal<test_sudoku_6_actual, false>>;

type test_sudoku_7_actual = Validate<
  [
    [["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"], ["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "ğŸ”´"]],
    [["ğŸ’ƒ", "ğŸ¦Œ", "â˜„ï¸"], ["â¤ï¸", "ğŸŒ©ï¸", "ğŸŒŸ"], ["âš¡", "ğŸ”´", "ğŸ’¨"]],
    [["ğŸ¦Œ", "â˜„ï¸", "â¤ï¸"], ["ğŸŒ©ï¸", "ğŸŒŸ", "âš¡"], ["ğŸ”´", "ğŸ’¨", "ğŸ’ƒ"]],
    [["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"], ["ğŸŒŸ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"]],
    [["â¤ï¸", "ğŸŒ©ï¸", "ğŸŒŸ"], ["âš¡", "ğŸ”´", "ğŸ’¨"], ["ğŸ’ƒ", "ğŸ¦Œ", "â˜„ï¸"]],
    [["ğŸŒ©ï¸", "ğŸŒŸ", "âš¡"], ["ğŸ”´", "ğŸ’¨", "ğŸ’ƒ"], ["ğŸ¦Œ", "â˜„ï¸", "â¤ï¸"]],
    [["ğŸŒŸ", "âš¡", "ğŸ”´"], ["ğŸ’¨", "ğŸ’ƒ", "ğŸ¦Œ"], ["â˜„ï¸", "â¤ï¸", "ğŸŒ©ï¸"]],
    [["âš¡", "ğŸ”´", "ğŸ’¨"], ["ğŸ’ƒ", "ğŸ¦Œ", "â˜„ï¸"], ["â¤ï¸", "ğŸŒ©ï¸", "ğŸŒŸ"]],
    [["ğŸ”´", "ğŸ’¨", "ğŸ’ƒ"], ["ğŸ¦Œ", "â˜„ï¸", "â¤ï¸"], ["ğŸŒ©ï¸", "ğŸŒŸ", "âš¡"]]
  ]
>;

type test_sudoku_7 = Expect<Equal<test_sudoku_7_actual, false>>;

type test_sudoku_8_actual = Validate<
  [
    //   ^?
    [["ğŸ¦Œ", "ğŸ”´", "ğŸ’ƒ"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["âš¡", "â¤ï¸", "ğŸŒŸ"]],
    [["ğŸ¦Œ", "ğŸ”´", "ğŸ’ƒ"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["âš¡", "â¤ï¸", "ğŸŒŸ"]],
    [["ğŸ¦Œ", "ğŸ”´", "ğŸ’ƒ"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["âš¡", "â¤ï¸", "ğŸŒŸ"]],
    [["ğŸ¦Œ", "ğŸ”´", "ğŸ’ƒ"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["âš¡", "â¤ï¸", "ğŸŒŸ"]],
    [["ğŸ¦Œ", "ğŸ”´", "ğŸ’ƒ"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["âš¡", "â¤ï¸", "ğŸŒŸ"]],
    [["ğŸ¦Œ", "ğŸ”´", "ğŸ’ƒ"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["âš¡", "â¤ï¸", "ğŸŒŸ"]],
    [["ğŸ¦Œ", "ğŸ”´", "ğŸ’ƒ"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["âš¡", "â¤ï¸", "ğŸŒŸ"]],
    [["ğŸ¦Œ", "ğŸ”´", "ğŸ’ƒ"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["âš¡", "â¤ï¸", "ğŸŒŸ"]],
    [["ğŸ¦Œ", "ğŸ”´", "ğŸ’ƒ"], ["ğŸŒ©ï¸", "â˜„ï¸", "ğŸ’¨"], ["âš¡", "â¤ï¸", "ğŸŒŸ"]]
  ]
>;

type test_sudoku_8 = Expect<Equal<test_sudoku_8_actual, false>>;
